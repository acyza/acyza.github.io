import{d as $,g as x,r as f,q as b,c as I,h as k,w as v,s as M,o as p,a as w,u as q,_ as H}from"./index-5f166855.js";import{C as V}from"./ContainerBaseComponent-9545ba10.js";import{C as j}from"./CardComponent-f184a5d9.js";import{m as D}from"./index-398b9212.js";const u=new D,g=u.normalizeLink;let T=".";u.normalizeLink=function(o){return/[^:|/]*:\/\//.test(o)?g(o):g(`${T}/${o}`)};function C(o,e){return T=e||".",u.render(o)}const E={class:"root"},R=["innerHTML"],z=["onClick","innerHTML"],A=$({__name:"BlogView",setup(o){const e=x(!1),d=M(),_=f([]);async function y(){e==null||e.loading();const t=await fetch("doc/blogInfo.json");if(!t.ok)throw"request blogInfo error";const r=await t.text(),n=JSON.parse(r);n.sort((s,c)=>new Date(c.updateTime).getTime()-new Date(s.updateTime).getTime()),_.value=n,e==null||e.done()}y().catch(console.error);const l=f(),m=f();let a;return d.afterEach(async t=>{var c,h;if(l.value="",a==null||a.abort(),a=new AbortController,!t.params.path)return;e==null||e.loading();const r=`/doc/blog/${typeof t.params.path=="string"?t.params.path:(c=t.params.path)==null?void 0:c.join("/")}`,n=await fetch(r,{signal:a.signal});l.value=C(await n.text(),r+"/.."),await b();const s=(h=m.value)==null?void 0:h.querySelectorAll("a");for(const i of s||[])i.addEventListener("click",B=>{if(B.preventDefault(),!/^[^/]+:\/\/[^/]+\/doc\/.*/.test(i.href)){open(i.href,"_target");return}d.push({path:i.href.replace(/^[^/]+:\/\/[^/]+\/doc/,"")})});e==null||e.done()}),(t,r)=>(p(),I("div",E,[t.$route.params.path?(p(),k(j,{key:0},{default:v(()=>[w("span",{ref_key:"contentRef",ref:m,innerHTML:l.value},null,8,R)]),_:1})):(p(),k(V,{key:1,class:"list",data:_.value,"update-time-prop":"updateTime"},{default:v(({path:n,title:s})=>[w("a",{class:"link",href:"javascript:void(0)",onClick:c=>t.$router.push({path:`/blog/${n}`}),innerHTML:q(C)(s,`/doc/blog/${n}/..`)},null,8,z)]),_:1},8,["data"]))]))}});const O=H(A,[["__scopeId","data-v-f79c0f9f"]]);export{O as default};
